## TCP/IP
  * 인터넷에 연결된 컴퓨터들이 데이터를 주고 받을 수 있도록 하는 표준 프로토콜
  * 구조
    - Application(osi 7의 application,presentation,session 계층 3개를 합쳐놓은 것에 해당)
      + telnet, ftp, http
    - Transport
      + tcp,udp
    - Network
      + ip
    - DataLink
  
## TCP(Transmission Control Protocol)
  * OSI 7 Layer 중에서 Transport Layer에서 사용하는 프로토콜로, 신뢰성있는 바이트 스트림 서비스를 제공한다.  
    (바이트 스트림 : 용량이 큰 데이터를 보내기 쉽게 TCP세그먼트라고 불리는 단위 패킹으로 작게 분해하여 관리하는 것)
  * TCP는 대용량의 데이터를 보내기 쉽게 작게 분해하여 상대방에게 보내고 정확하게 도착했는지 확인하는 역할.
  * 상대방에게 데이터를 확실하게 보내기 위해 3-way handshacking 방법 사용.
  * 연결해제시에는 4-way handshacking 사용.
  * point to point와 full-duplex 방식 사용. 
    - point to point : 각 연결이 정확히 2개의 양끝 점을 가지고 있는 것
    - full-duplex : 전송이 양방향 동시에 일어날 수 있는 것
  * 혼잡제어, 흐름제어, 에러감지 지원
    - 혼잡제어 : 데이터를 송신하는 곳과 수신하는 곳의 데이터 처리 속도를 조절하여 수신자의 버퍼오버플로우를 막는 것.
    - 흐름제어 : 네트워크 내의 패킷수가 오버플로우 나지 않게 방지하는 것.
    - 에러감지 : checksum 활용하여 에러 확인.
  * 일정 시간 ACK 값이 수신을 하지 못한 경우, 재전송 요청(Timeout-based Retransmission)
## UDP(User Datagram Protocol)
  * 데이터를 데이터그램 단위로 처리하는 프로토콜, 비연결형 서비스
    - 연결을 위해 할당되는 논리적인 경로가 없다. 그렇기에 각각의 패킷은 독립적인 경로로 전송되고, 각 패킷은 독립적인 관계이다.
  * 비연결형 서비스이기 때문에 연결설정하고 해제하는 과정이 없다.
  * 흐름제어나 혼잡제어와 같은 기능도 처리하지 않기에 TCP보다 빠르다.
  * 신뢰성있는 데이터 전송은 하지 못한다. 그렇기에 신뢰성보다 연속성이 중요한 스트리밍이나 게임에서 사용.
  
## 참고
  * SYN : Synchronize Sequence Number
  * ACK : Acknowledgement
  * 3-way handshacking
    - 가장 처음, 송신측에서 'SYN' 플래그로 상대에게 접속하고 동시에 패킷을 보냄.
    - 그다음, 수신측에서 'SYN/ACK' 플래그로 송신측에게 접속하고 패킷받은 사실 보냄.
    - 마지막으로 송신측이 'ACK' 플래그 보내 패킷교환 완료 전함.
    - 이 과정에서 어디선가 통신이 도중 끊어지면 TCP는 같은 순서로 패킷 다시 전송함.
    <img width="447" alt="스크린샷 2019-04-01 오후 3 20 26" src="https://user-images.githubusercontent.com/21151247/55307196-c4304680-5491-11e9-9213-a36380801b46.png">

  * 4-way handshacking 연결해제시 동작순서
    - 클라이언트가 연결종료한다고 'FIN' 플래그 전송.
    - 서버는 클라이언트의 요청을 받고 'ACK' 메세지 전송.
    - 데이터를 모두 보낼때까지 timeout(서버)
    - 데이터 모두 보내고 통신이 끝났으면 연결 종료되었다고 'FIN' 전송.
    - 클라이언트는 'FIN' 받고 'ACK' 전송.
    - 서버는 'ACK' 받고 소켓 close
    - 클라이언트는 아직 서버로 부터 받지 못한 데이터 있을 것을 대비해 일정시간 패킷 기다림(time wait)

  * ISN을 난수로 설정하는 이유?
    - 클라이언트가 초기에 보내는 Sequence Number를 ISN 이라고 한다. 
    - ISN은 0으로 시작하지 않고 난수로 시작되는데, 이유는 Connection을 맺을 때, port는 연결이 해제되고 나중에 다시 같은 번호로 사용될 수 있다(port 번호는 유한 범위).  
      그 때, SYN을 보고 패킷을 구분하는 서버는 만약 순차적인 수로 전송이 왔다면 과거에 전송된 패킷으로 인식할 수 있기 때문이다.

  * 연결 해제시 4-way handshacking를 사용하는 이유
    - 클라이언트가 데이터 전송을 마쳤다 해도, 서버가 보낼 데이터가 남아 있을 수도 있기 때문에 클라이언트의 'FIN' 플래그에 대한 'ACK'만 보내고,
     나머지 데이터를 다 보내고 'FIN'전송을 하기 때문.
  * 서버가 전송하는 FIN 패킷보다 전에 전송한 패킷이 FIN 보다 늦게 클라이언트에게 도착하면 어떻게 될까?
    - 클라이언트는 서버로부터 받지 못한 데이터가 있을 것을 대비해 FIN 패킷을 받고 난 후에도 일정 시간 패킷을 기다린다 -> time wait 과정


      
  
